var Core={initialized:false,initialize:function(){if(this.initialized)return;this.initialized=true;this.build();this.events()},build:function(){this.headerSearch();this.animations();this.newsletter();this.featuredBoxes();this.flexSlider();$("a[rel=tooltip]").tooltip();this.sort();this.toggle();this.latestTweets();this.lightbox();this.parallax()},events:function(){$(window).on("resize",function(){var e=window.setTimeout(function(){window.clearTimeout(e);Core.flexSlider();Core.featuredBoxes()},50)});$(".dropdown-menu a").on("touchstart",function(e){window.location.href=$(this).attr("href")});$("a[data-hash]").on("click",function(e){e.preventDefault();var t=$("body header:first"),n=t.height(),r=$(this).attr("href"),i=$(this);$("html,body").animate({scrollTop:$(r).offset().top-n},600);return false})},stickyMenu:function(){if($("body").hasClass("boxed"))return false;var e=$("body header:first"),t=e.height(),n=e.find(".logo img"),r=n.width(),i=n.height(),s=this,o=50;n.css("height",o);var u=n.width();n.css("height","auto").css("width","auto");var a=$("header.flat-menu ul.nav-main > li > a");s.checkStickyMenu=function(){if($(window).scrollTop()>t-10-o&&$(window).width()>767){if($("body").hasClass("sticky-menu-active"))return false;n.stop(true,true);$("body").addClass("sticky-menu-active").css("padding-top",t);a.addClass("sticky-menu-active");n.animate({width:u,height:o},250,function(){})}else{if($("body").hasClass("sticky-menu-active")){$("body").removeClass("sticky-menu-active").css("padding-top",0);a.removeClass("sticky-menu-active");n.animate({width:r,height:i},250,function(){n.css({width:"auto",height:"auto"})})}}};$(window).on("scroll",function(){s.checkStickyMenu()});$(window).on("resize",function(){s.checkStickyMenu()});s.checkStickyMenu()},headerSearch:function(){$("#searchForm").validate({rules:{q:{required:true}},errorPlacement:function(e,t){},highlight:function(e){$(e).closest(".control-group").removeClass("success").addClass("error")},success:function(e){$(e).closest(".control-group").removeClass("error").addClass("success")}})},animations:function(){$("[data-appear-animation]").each(function(){var e=$(this);e.addClass("appear-animation");if(!$("html").hasClass("no-csstransitions")&&$(window).width()>767){e.appear(function(){var t=e.attr("data-appear-animation-delay")?e.attr("data-appear-animation-delay"):1;if(t>1)e.css("animation-delay",t+"ms");e.addClass(e.attr("data-appear-animation"));setTimeout(function(){e.addClass("appear-animation-visible")},t)},{accX:0,accY:-150})}else{e.addClass("appear-animation-visible")}})},newsletter:function(){$("#newsletterForm").validate({submitHandler:function(e){$.ajax({type:"POST",url:$("#newsletterForm").attr("action"),data:{email:$("#newsletterForm #email").val()},dataType:"json",success:function(e){if(e.response=="success"){$("#newsletterSuccess").removeClass("hidden");$("#newsletterError").addClass("hidden");$("#newsletterForm #email").val("").blur().closest(".control-group").removeClass("success").removeClass("error")}else{$("#newsletterError").html(e.message);$("#newsletterError").removeClass("hidden");$("#newsletterSuccess").addClass("hidden");$("#newsletterForm #email").blur().closest(".control-group").removeClass("success").addClass("error")}}})},rules:{email:{required:true,email:true}},errorPlacement:function(e,t){},highlight:function(e){$(e).closest(".control-group").removeClass("success").addClass("error")},success:function(e){$(e).closest(".control-group").removeClass("error").addClass("success")}})},featuredBoxes:function(){$("div.featured-box").css("height","auto");$("div.featured-boxes").each(function(){var e=$(this);var t=0;$("div.featured-box",e).each(function(){if($(this).height()>t)t=$(this).height()});$("div.featured-box",e).height(t)})},flexSlider:function(e){$("div.flexslider").each(function(){var t=$(this);var n={animationLoop:false,controlNav:true,directionNav:true};var r=$.extend({},n,e,t.data("plugin-options"));if($(window).width()<768&&t.hasClass("normal-device")||$(window).width()>768&&t.hasClass("small-device")||!t.hasClass("flexslider-init")){if(t.find("div.flex-viewport")&&typeof r.maxVisibleItems!="undefined"){var i=t;i.find("li.clone").remove();var s=i.clone();s.find("div.flex-viewport").children().unwrap();s.find("ul.flex-direction-nav, ol.flex-control-nav").remove().end().find("*").removeAttr("style").removeClass(function(e,t){return(t.match(/\bflex\S+/g)||[]).join(" ")});s.insertBefore(i);i.remove();t=s}if(typeof r.maxVisibleItems!="undefined"){t.find("ul.slides li > div").unwrap();var o=t.find("ul.slides").children("div");var u=r.maxVisibleItems;if($(window).width()<768){u=1;t.removeClass("normal-device").addClass("small-device")}else{t.removeClass("small-device").addClass("normal-device")}for(var a=0;a<o.length;a+=u){var f=o.slice(a,a+u);f.wrapAll("<li></li>")}}}t.flexslider(r).addClass("flexslider-init");if(r.controlNav)t.addClass("flexslider-control-nav");if(r.directionNav)t.addClass("flexslider-direction-nav")})},sort:function(){$("ul.sort-source").each(function(){var e=$(this);var t=$("ul.sort-destination[data-sort-id="+$(this).attr("data-sort-id")+"]");if(t.get(0)){var n=0;var r=$("span.thumb-info-caption p",t);r.each(function(){if($(this).height()>n)n=$(this).height()});r.height(n);$(window).load(function(){t.isotope({itemSelector:"li",layoutMode:"fitRows"});e.find("a").click(function(n){n.preventDefault();var r=$(this),i=r.parent().attr("data-option-value");e.find("li.active").removeClass("active");r.parent().addClass("active");t.isotope({filter:i});self.location="#"+i.replace(".","");return false});$(window).bind("hashchange",function(n){var r="."+location.hash.replace("#",""),i=r=="."||r==".*"?"*":r;e.find("li.active").removeClass("active");e.find("li[data-option-value='"+i+"']").addClass("active");t.isotope({filter:i})});var n="."+(location.hash.replace("#","")||"*");e.find("li[data-option-value='"+n+"'] a").click()})}})},toggle:function(){var e=this;previewParClosedHeight=25;$("section.toggle > label").prepend($("<i />").addClass("icon-plus"));$("section.toggle > label").prepend($("<i />").addClass("icon-minus"));$("section.toggle.active > p").addClass("preview-active");$("section.toggle.active > div.toggle-content").slideDown(350,function(){});$("section.toggle > label").click(function(e){var t=$(this).parent(),n=$(this).parents("div.toogle"),r=false,i=n.hasClass("toogle-accordion");if(i&&typeof e.originalEvent!="undefined"){n.find("section.toggle.active > label").trigger("click")}t.toggleClass("active");if(t.find("> p").get(0)){r=t.find("> p");var s=r.css("height");r.css("height","auto");var o=r.css("height");r.css("height",s)}var u=t.find("> div.toggle-content");if(t.hasClass("active")){$(r).animate({height:o},350,function(){$(this).addClass("preview-active")});u.slideDown(350,function(){})}else{$(r).animate({height:previewParClosedHeight},350,function(){$(this).removeClass("preview-active")});u.slideUp(350,function(){})}})},lightbox:function(e){$.extend(true,$.magnificPopup.defaults,{tClose:"Close (Esc)",tLoading:"Loading...",gallery:{tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},image:{tError:'<a href="%url%">The image</a> could not be loaded.'},ajax:{tError:'<a href="%url%">The content</a> could not be loaded.'}});$(".lightbox").each(function(){var t=$(this);var n,r={};if(t.data("plugin-options"))n=$.extend({},r,e,t.data("plugin-options"));$(this).magnificPopup(n)})},parallax:function(){$(window).load(function(){if($(".parallax").get(0)){if(!Modernizr.touch){$(window).stellar({responsive:true,scrollProperty:"scroll",parallaxElements:false,horizontalScrolling:false,horizontalOffset:0,verticalOffset:0})}else{$(".parallax").addClass("disabled")}}})},latestTweets:function(){var e=$("#tweet"),t=e.data("account-id");if(e.get(0)&&t!=""){getTwitters("tweet",{id:t,count:1})}}};Core.initialize();$(window).load(function(){Core.stickyMenu()})