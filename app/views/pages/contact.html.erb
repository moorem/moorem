<div role="main" class="main">

  <section class="page-top">
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <ul class="breadcrumb">
            <li><%= link_to "Home", root_path %></li>
            <li class="active">Contact Us</li>
          </ul>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <!--<h2>Contact Us</h2>-->
        </div>
      </div>
    </div>
  </section>

  <!-- Google Maps -->
  <div id="map_wrapper">
    <div id="map_canvas" class="mapping"></div>
  </div>

  <div class="container">
    <div class="row">
      <div class="col-md-6" id="career">
        <h2 class="short"><strong>Contact</strong> Us</h2>
        <div id="contact_replace">
          <%= form_for @contact,  :multipart => true, :url => pages_path, :html => {:class => 'reply' } do |f| %>
            <fieldset>
              <div class="row">
                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                  <label>Name: <span class="red">*</span></label>
                  <%= f.text_field :name, :class => 'form-control', :id => 'name', required: true, placeholder: 'Please Enter Your Name' %>
                  <!--<input class="form-control" id="name" name="name" type="text" value="" required>-->
                </div>
                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                  <label>Email: <span class="red">*</span></label>
                  <%= f.email_field :email, :class => 'form-control', :id => 'email', required: true, placeholder: 'Please Enter Your Email' %>
                  <!--<input class="form-control" type="email" id="email" name="email" value="" required>-->
                </div>
              </div>

              <div class="row margin-top-10">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                  <label>Subject: <span class="red">*</span></label>
                  <%= f.select(:subject, [['--- PLEASE SELECT ---', ''], ['General Inquiry', 'General Inquiry'], ['Project Quotation', 'Project Quotation'], ['Post Your Resume', 'Post Your Resume']], {}, :class => 'form-control') %>
                  <!--<input class="form-control" id="subject" name="subject" type="text" value="" required>-->
                  <span style=color:red;"><%= @contact.errors[:subject].join(", ") %></span>
                </div>
              </div>
              <br/>

              <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                  <label>Message: <span class="red">*</span></label>
                  <%= f.text_area :message,  :class => 'form-control', :id => 'message', rows: 3, cols: 40, required: true, placeholder: 'Please Enter Your Message' %>
                  <!--<textarea class="form-control" id="text" name="text" rows="3" cols="40" required></textarea>-->
                </div>
              </div>

              <div class="row margin-top-10">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                  <label>Upload : (Please upload either MS Word or PDF Document)</label>
                  <%= f.file_field :uploaded_document, :required => true, :onchange =>"validateFiles(this);",:data => {:max_file_size => 5.megabytes} %>
                  <!--<textarea class="form-control" id="text" name="text" rows="3" cols="40" required></textarea>-->
                </div>
              </div>

            </fieldset>
            <div class="btn-toolbar margin-top-10">
              <button class="btn btn-large btn-primary pull-left" type="submit">Send</button>
            </div>
            <div class="success alert-success alert hidden">Your message has been sent successfully.
            </div>
            <div class="error alert-error alert hidden">E-mail must be valid and message must be longer
              than 100 characters.
            </div>
            <div class="clearfix">
            </div>
          <% end %>
        </div>
      </div>
      <div class="col-md-6">

        <h4 class="pull-top">Get in <strong>touch</strong></h4>
        <p> Feel free to talk to our online representative at any time you please using our Live Chat system on our website or one of the below instant messaging programs.<br>
          Please be patient while waiting for response. (24/7 Support!) </p>

        <hr />
        <h4>Registered <strong>Office</strong></h4>
        <ul class="unstyled">
          <li><i class="icon-map-marker"></i> <strong>Address:</strong> Sector 47, Gurgaon, India - 122001 </li>
          <li><i class="icon-phone"></i> <strong>Phone:</strong> +91 973 878 0580</li>
          <li><i class="icon-envelope"></i> <strong>Email:</strong> <a href="mailto:contact@moorem.com">contact@moorem.com</a></li>
        </ul>

        <hr />

        <h4>Development <strong>Office</strong></h4>
        <ul class="unstyled">
          <li><i class="icon-map-marker"></i> <strong>Address:</strong> #538, 2nd Floor, 14th Cross, 3rd Block, ViswaPriya Layout, Begur Main Road, Bangalore, India - 560068</li>
          <li><i class="icon-phone"></i> <strong>Phone:</strong> +91 973 878 0580</li>
          <li><i class="icon-envelope"></i> <strong>Email:</strong> <a href="mailto:contact@moorem.com">contact@moorem.com</a></li>
        </ul>

        <hr />

        <h4>Business <strong>Hours</strong></h4>
        <ul class="unstyled">
          <li><i class="icon-time"></i> Monday - Friday 10am to 7pm</li>
          <li><i class="icon-time"></i> Saturday &amp; Sunday - Closed</li>
        </ul>

      </div>

    </div>

  </div>

</div>
<script type="text/javascript">
  jQuery(function($) {
    // Asynchronously Load the map API
    var script = document.createElement('script');
    script.src = "http://maps.googleapis.com/maps/api/js?sensor=false&callback=initialize";
    document.body.appendChild(script);
  });

  function initialize() {
    var map;
    var bounds = new google.maps.LatLngBounds();
    var mapOptions = {
      mapTypeId: 'roadmap'
    };

    // Display a map on the page
    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
    map.setTilt(45);

    // Multiple Markers
    var markers = [
      ['Development Office, Bangalore', 12.894358,77.625873],
      ['Business Office, Gurgaon', 28.461678,77.066336]
    ];

    // Info Window Content
    var infoWindowContent = [
      ['<div class="info_content">' +
          '<h5 style="color:#0088CC">Development Office</h5>' +
          '<p>#538, 2nd Floor, 14th Cross,3rd Block, ViswaPriya Layout,Begur Main Road,Bangalore, India - 560068</p>' +        '</div>'],
      ['<div class="info_content">' +
          '<h5 style="color:#0088CC">Registered Office</h5>' +
          '<p>Sector 47,Gurgaon, India - 122001</p>' +
          '</div>']
    ];

    // Display multiple markers on a map
    var infoWindow = new google.maps.InfoWindow(), marker, i;

    // Loop through our array of markers & place each one on the map
    for( i = 0; i < markers.length; i++ ) {
      var position = new google.maps.LatLng(markers[i][1], markers[i][2]);
      bounds.extend(position);
      marker = new google.maps.Marker({
        position: position,
        map: map,
        title: markers[i][0]
      });

      // Allow each marker to have an info window
      google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
          infoWindow.setContent(infoWindowContent[i][0]);
          infoWindow.open(map, marker);
        }
      })(marker, i));

      // Automatically center the map fitting all markers on the screen
      map.fitBounds(bounds);
    }

    // Override our map zoom level once our fitBounds function runs (Make sure it only runs once)
    var boundsListener = google.maps.event.addListener((map), 'bounds_changed', function(event) {
      this.setZoom(4);
      google.maps.event.removeListener(boundsListener);
    });
  }
  function validateFiles(inputFile) {
    $('#size_error').remove();
    $('#extention_error').remove();
    var maxExceededMessage = "This file exceeds the maximum allowed file size (5 MB)";
    var extErrorMessage = "Only pdf and doc file is allowed";
    var allowedExtension = ["docx","doc","pdf"];

    var extName;
    var maxFileSize = $(inputFile).data('max-file-size');
    var sizeExceeded = false;
    var extError = false;

    $.each(inputFile.files, function() {
      if (this.size && maxFileSize && this.size > parseInt(maxFileSize)) {sizeExceeded=true;};
      extName = this.name.split('.').pop();
      if ($.inArray(extName, allowedExtension) == -1) {extError=true;};
    });
    if (sizeExceeded) {
      $('#contact_uploaded_document').after("<label id=size_error style=display:block;color:red;font-weight: bold;>Should not exceed more than 5 MB </label>");
      $(inputFile).val('');
    }

    else if (extError) {
      $('#contact_uploaded_document').after("<label id=extention_error style=display:block;color:red;font-weight: bold;>Please choose valid extension file </label>");
      $(inputFile).val('');
    };
  }
</script>