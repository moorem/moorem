<div role="main" class="main">

  <section class="page-top">
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <ul class="breadcrumb">
            <li><%= link_to 'Home', root_path %></li>
            <li class="active">Contact Us</li>
          </ul>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <!--<h2>Contact Us</h2>-->
        </div>
      </div>
    </div>
  </section>

  <!-- Google Maps -->
  <div id="map_wrapper">
    <div id="map_canvas" class="mapping"></div>
  </div>

  <div class="container">
    <div class="row">
      <div class="col-md-6" id="career">
        <h2 class="short"><strong>Contact</strong> Us</h2>

        <div id="contact_replace">
          <%= form_for @contact, :url => pages_path, :html => {:multipart => true, :class => 'reply'} do |f| %>
            <fieldset>
              <div class="row">
                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                  <label>Name: <span class="red">*</span></label>
                  <%= f.text_field :name, :class => 'form-control', :id => 'name', required: true, placeholder: 'Please Enter Your Name' %>
                  <!--<input class="form-control" id="name" name="name" type="text" value="" required>-->
                </div>
                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                  <label>Email: <span class="red">*</span></label>
                  <%= f.email_field :email, :class => 'form-control', :id => 'email', required: true, placeholder: 'Please Enter Your Email' %>
                  <!--<input class="form-control" type="email" id="email" name="email" value="" required>-->
                </div>
              </div>

              <div class="row margin-top-10">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                  <label>Subject: <span class="red">*</span></label>
                  <%= f.select(:subject, [['--- PLEASE SELECT ---', ''], ['General Inquiry', 'General Inquiry'], ['Project Quotation', 'Project Quotation'], ['Post Your Resume', 'Post Your Resume']], {}, :class => 'form-control') %>
                  <!--<input class="form-control" id="subject" name="subject" type="text" value="" required>-->
                  <span style=color:red;"><%= @contact.errors[:subject].join(", ") %></span>
                </div>
              </div>
              <br/>

              <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                  <label>Message: <span class="red">*</span></label>
                  <%= f.text_area :message, :class => 'form-control', :id => 'message', rows: 3, cols: 40, required: true, placeholder: 'Please Enter Your Message' %>
                  <!--<textarea class="form-control" id="text" name="text" rows="3" cols="40" required></textarea>-->
                </div>
              </div>

              <div class="row margin-top-10">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                  <label>Upload: (Please upload either MS Word or PDF Document)</label>
                  <%= file_field_tag :uploaded_document, :onchange => "validateFiles(this);", :data => {:max_file_size => 5.megabytes} %>
                </div>
              </div>

              <div class="row margin-top-10">
                <%= textcaptcha_fields(f) do %>
                  <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <%= f.label :textcaptcha_answer, @contact.textcaptcha_question, :class => 'control-label mandatory' %>
                    <span class="red">*</span>
                    <%= f.text_field :textcaptcha_answer, :value => '', :class => 'form-control' %>
                    <span class="help-inline failure red"><%= @contact.errors[:textcaptcha_answer].join(", ") %></span>
                  </div>
                <% end %>
              </div>

            </fieldset>
            <div class="btn-toolbar margin-top-10">
              <button class="btn btn-large btn-primary pull-right" type="submit">Send Message</button>
            </div>
            <div class="success alert-success alert hidden">Your message has been sent successfully.
            </div>
            <div class="error alert-error alert hidden">E-mail must be valid and message must be longer
              than 100 characters.
            </div>
            <div class="clearfix">
            </div>
          <% end %>
        </div>
      </div>
      <div class="col-md-6">

        <h4 class="pull-top">Get in <strong>touch</strong></h4>

        <p> Feel free to talk to our online representative at any time you please using our Live Chat system on our
          website or one of the below instant messaging programs.<br>
          Please be patient while waiting for response. (24/7 Support!) </p>

        <hr/>
        <h4>Registered <strong>Office</strong></h4>
        <ul class="unstyled">
          <li><i class="fa fa-map-marker"></i> <strong>Address:</strong> Sector 47, Gurgaon, India - 122001</li>
          <li><i class="fa fa-phone"></i> <strong>Phone:</strong> +91 973 878 0580</li>
          <li><i class="fa fa-envelope"></i> <strong>Email:</strong>
            <a href="mailto:contact@moorem.com">contact@moorem.com</a></li>
        </ul>

        <hr/>

        <h4>Development <strong>Office</strong></h4>
        <ul class="unstyled">
          <li><i class="fa fa-map-marker"></i> <strong>Address:</strong>
            #1564, Revanna's, 3rd Floor, 27th Main Road, Sector 2, HSR Layout, Bengaluru, Karnataka - 560102
          </li>
          <li><i class="fa fa-phone"></i> <strong>Phone:</strong> +91 9738780580</li>
          <li><i class="fa fa-envelope"></i> <strong>Email:</strong>
            <a href="mailto:contact@moorem.com">contact@moorem.com</a></li>
        </ul>

        <hr/>

        <h4>UK Business <strong>Office</strong></h4>
        <ul class="unstyled">
          <li><i class="fa fa-map-marker"></i> <strong>Address:</strong> Hythe, Southampton, Hampshire SO45 6DT
          </li>
          <li><i class="fa fa-phone"></i> <strong>Phone:</strong> +44 (0) 23 8084 7822</li>
          <li><i class="fa fa-envelope"></i> <strong>Email:</strong>
            <a href="mailto:contact@moorem.com">ianjones@moorem.com</a></li>
        </ul>

        <hr/>

        <h4>Business <strong>Hours</strong></h4>
        <ul class="unstyled">
          <li><i class="fa fa-clock-o"></i> Monday - Friday 9am to 6pm</li>
          <li><i class="fa fa-clock-o"></i> Saturday &amp; Sunday - Closed</li>
        </ul>

      </div>

    </div>

  </div>

</div>
<script type="text/javascript">
  jQuery(function ($) {
    // Asynchronously Load the map API
    var script = document.createElement('script');
    script.src = "http://maps.googleapis.com/maps/api/js?sensor=false&callback=initialize";
    document.body.appendChild(script);
  });

  function initialize() {
    var map;
    var bounds = new google.maps.LatLngBounds();
    var mapOptions = {
      mapTypeId: 'roadmap'
    };

    // Display a map on the page
    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
    map.setTilt(45);

    // Multiple Markers
    var markers = [
      ['Development Office, Bangalore', 12.903764, 77.649747],
      ['Business Office, Gurgaon', 28.461678, 77.066336],
      ['UK Business Office, UK', 50.87559299999999, -1.4024971999999707]
    ];

    // Info Window Content
    var infoWindowContent = [
      ['<div class="info_content">' +
      '<h4>Development Office</h4>' +
      '<p>#1564, Revanna\'s, 3rd Floor, 27th Main Road, Sector 2, HSR Layout, Bengaluru, Karnataka - 560102</p>' + '</div>'],
      ['<div class="info_content">' +
      '<h4>Registered Office</h4>' +
      '<p>Sector 47,Gurgaon, India - 122001</p>' +
      '</div>'],
      ['<div class="info_content">' +
      '<h4>UK Business Office</h4>' +
      '<p>Hythe, Southampton, Hampshire SO45 6DT</p>' +
      '</div>']
    ];

    // Display multiple markers on a map
    var infoWindow = new google.maps.InfoWindow({maxWidth: 200}), marker, i;

    // Loop through our array of markers & place each one on the map
    for (i = 0; i < markers.length; i++) {
      var position = new google.maps.LatLng(markers[i][1], markers[i][2]);
      bounds.extend(position);
      var iconBase = 'images/Map-icon-1.png';
      marker = new google.maps.Marker({
        position: position,
        map: map,
        title: markers[i][0],
        icon: iconBase
      });

      // Allow each marker to have an info window
      google.maps.event.addListener(marker, 'click', (function (marker, i) {
        return function () {
          infoWindow.setContent(infoWindowContent[i][0]);
          infoWindow.open(map, marker);
        }
      })(marker, i));

      // Automatically center the map fitting all markers on the screen
      map.fitBounds(bounds);
    }

    // Override our map zoom level once our fitBounds function runs (Make sure it only runs once)
    var boundsListener = google.maps.event.addListener((map), 'bounds_changed', function (event) {
      this.setZoom(2);
      google.maps.event.removeListener(boundsListener);
    });
  }
  function validateFiles(inputFile) {
    $('#size_error').remove();
    $('#extention_error').remove();
    var maxExceededMessage = "This file exceeds the maximum allowed file size (5 MB)";
    var extErrorMessage = "Only pdf and doc file is allowed";
    var allowedExtension = ["docx", "doc", "pdf"];

    var extName;
    var maxFileSize = $(inputFile).data('max-file-size');
    var sizeExceeded = false;
    var extError = false;

    $.each(inputFile.files, function () {
      if (this.size && maxFileSize && this.size > parseInt(maxFileSize)) {
        sizeExceeded = true;
      }
      ;
      extName = this.name.split('.').pop();
      if ($.inArray(extName, allowedExtension) == -1) {
        extError = true;
      }
      ;
    });
    if (sizeExceeded) {
      $('#contact_uploaded_document').after("<label id=size_error style=display:block;color:red;font-weight: bold;>Should not exceed more than 5 MB </label>");
      $(inputFile).val('');
    }

    else if (extError) {
      $('#contact_uploaded_document').after("<label id=extention_error style=display:block;color:red;font-weight: bold;>Please choose valid extension file </label>");
      $(inputFile).val('');
    }
    ;
  }
</script>