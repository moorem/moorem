(function(e,t,n){"use strict";var r="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";e.fn.imagesLoaded=function(t){function c(){var n=e(f),r=e(l);if(s){if(l.length){s.reject(u,n,r)}else{s.resolve(u)}}if(e.isFunction(t)){t.call(i,u,n,r)}}function h(e){p(e.target,e.type==="error")}function p(t,n){if(t.src===r||e.inArray(t,a)!==-1){return}a.push(t);if(n){l.push(t)}else{f.push(t)}e.data(t,"imagesLoaded",{isBroken:n,src:t.src});if(o){s.notifyWith(e(t),[n,u,e(f),e(l)])}if(u.length===a.length){setTimeout(c);u.unbind(".imagesLoaded",h)}}var i=this,s=e.isFunction(e.Deferred)?e.Deferred():0,o=e.isFunction(s.notify),u=i.find("img").add(i.filter("img")),a=[],f=[],l=[];if(e.isPlainObject(t)){e.each(t,function(e,n){if(e==="callback"){t=n}else if(s){s[e](n)}})}if(!u.length){c()}else{u.bind("load.imagesLoaded error.imagesLoaded",h).each(function(t,i){var s=i.src;var o=e.data(i,"imagesLoaded");if(o&&o.src===s){p(i,o.isBroken);return}if(i.complete&&i.naturalWidth!==n){p(i,i.naturalWidth===0||i.naturalHeight===0);return}if(i.readyState||i.complete){i.src=r;i.src=s}})}return s?s.promise(i):i};var i=t.Modernizr;e.Flipshow=function(t,n){this.$el=e(n);this._init(t)};e.Flipshow.defaults={speed:700,easing:"ease-out"};e.Flipshow.prototype={_init:function(t){this.options=e.extend(true,{},e.Flipshow.defaults,t);this.support=i.csstransitions&&i.csstransforms3d&&!/MSIE (\d+\.\d+);/.test(navigator.userAgent);var n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},r={WebkitTransform:"-webkit-transform",MozTransform:"-moz-transform",OTransform:"-o-transform",msTransform:"-ms-transform",transform:"transform"};if(this.support){this.transEndEventName=n[i.prefixed("transition")]+".cbpFWSlider";this.transformName=r[i.prefixed("transform")]}this.transitionProperties=this.transformName+" "+this.options.speed+"ms "+this.options.easing;this.$listItems=this.$el.children("ul.fc-slides");this.$items=this.$listItems.children("li").hide();this.itemsCount=this.$items.length;this.current=0;this.$listItems.imagesLoaded(e.proxy(function(){this.$items.eq(this.current).show();if(this.itemsCount>0){this._addNav();if(this.support){this._layout()}}},this))},_addNav:function(){var t=this,n=e('<div class="fc-left"><span></span><span></span><span></span><i class="icon-arrow-left"></i></div>'),r=e('<div class="fc-right"><span></span><span></span><span></span><i class="icon-arrow-right"></i></div>');e("<nav></nav>").append(n,r).appendTo(this.$el);n.find("span").on("click.flipshow touchstart.flipshow",function(){t._navigate(e(this),"left")});r.find("span").on("click.flipshow touchstart.flipshow",function(){t._navigate(e(this),"right")})},_layout:function(t,n){this.$flipFront=e('<div class="fc-front"><div></div></div>');this.$frontContent=this.$flipFront.children("div:first");this.$flipBack=e('<div class="fc-back"><div></div></div>');this.$backContent=this.$flipBack.children("div:first");this.$flipEl=e('<div class="fc-flip"></div>').append(this.$flipFront,this.$flipBack).hide().appendTo(this.$el)},_navigate:function(e,t){if(this.isAnimating&&this.support){return false}this.isAnimating=true;var n=this.$items.eq(this.current).hide();if(t==="right"){this.current<this.itemsCount-1?++this.current:this.current=0}else if(t==="left"){this.current>0?--this.current:this.current=this.itemsCount-1}var r=this.$items.eq(this.current);if(this.support){this._flip(n,r,t,e.index())}else{r.show()}},_flip:function(t,n,r,i){var s="",o=e('<div class="fc-overlay-light"></div>'),u=e('<div class="fc-overlay-dark"></div>');this.$flipEl.css("transition",this.transitionProperties);this.$flipFront.find("div.fc-overlay-light, div.fc-overlay-dark").remove();this.$flipBack.find("div.fc-overlay-light, div.fc-overlay-dark").remove();if(r==="right"){this.$flipFront.append(o);this.$flipBack.append(u);u.css("opacity",1)}else if(r==="left"){this.$flipFront.append(u);this.$flipBack.append(o);o.css("opacity",1)}var a={transition:"opacity "+this.options.speed/1.3+"ms"};o.css(a);u.css(a);switch(i){case 0:s=r==="left"?"rotate3d(-1,1,0,-179deg) rotate3d(-1,1,0,-1deg)":"rotate3d(1,1,0,180deg)";break;case 1:s=r==="left"?"rotate3d(0,1,0,-179deg) rotate3d(0,1,0,-1deg)":"rotate3d(0,1,0,180deg)";break;case 2:s=r==="left"?"rotate3d(1,1,0,-179deg) rotate3d(1,1,0,-1deg)":"rotate3d(-1,1,0,179deg) rotate3d(-1,1,0,1deg)";break}this.$flipBack.css("transform",s);this.$frontContent.empty().html(t.html());this.$backContent.empty().html(n.html());this.$flipEl.show();var f=this;setTimeout(function(){f.$flipEl.css("transform",s);o.css("opacity",r==="right"?1:0);u.css("opacity",r==="right"?0:1);f.$flipEl.on(f.transEndEventName,function(e){if(e.target.className==="fc-overlay-light"||e.target.className==="fc-overlay-dark")return;f._ontransitionend(n)})},25)},_ontransitionend:function(e){e.show();this.$flipEl.off(this.transEndEventName).css({transition:"none",transform:"none"}).hide();this.isAnimating=false}};var s=function(e){if(t.console){t.console.error(e)}};e.fn.flipshow=function(t){if(typeof t==="string"){var n=Array.prototype.slice.call(arguments,1);this.each(function(){var r=e.data(this,"flipshow");if(!r){s("cannot call methods on flipshow prior to initialization; "+"attempted to call method '"+t+"'");return}if(!e.isFunction(r[t])||t.charAt(0)==="_"){s("no such method '"+t+"' for flipshow instance");return}r[t].apply(r,n)})}else{this.each(function(){var n=e.data(this,"flipshow");if(n){n._init()}else{n=e.data(this,"flipshow",new e.Flipshow(t,this))}})}return this}})(jQuery,window)